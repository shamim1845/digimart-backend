"use strict";(self.webpackChunkdigimart_frontend=self.webpackChunkdigimart_frontend||[]).push([[710],{4015:function(n,e,r){r.r(e),r.d(e,{default:function(){return z}});var t,i,o,a,u,s,l,c=r(168),d=r(1413),m=r(885),g=r(2791),f=r(4603),p=r(6960),h=r(6871),v=r(5705),x=r(1089),y=r(1197),b=r(8650),Z=r(7528),j=r(6316),w=r(905),P=r(8361),q=r(2958),C=r(5987),E=r(184),S=["label"],T=function(n){var e=n.label,r=(0,C.Z)(n,S),t=(0,v.U$)(r),i=(0,m.Z)(t,2),o=i[0],a=i[1];return(0,E.jsxs)(_,{children:[(0,E.jsx)("label",{htmlFor:r.id||r.name,children:e}),(0,E.jsx)("select",(0,d.Z)((0,d.Z)({},o),r)),a.touched&&a.error?(0,E.jsxs)("div",{className:"error",children:[(0,E.jsx)("span",{children:"i"})," ",a.error]}):null]})},_=f.ZP.div(t||(t=(0,c.Z)(["\n  display: flex;\n  flex-direction: column;\n  margin: 1rem 0;\n  label {\n    font-size: 1.3rem;\n    color: var(--text-secondary);\n  }\n  select {\n    background: #fff;\n    color: var(--text-secondary);\n    margin: 0.5rem 0 1rem;\n    width: 100%;\n    height: 3.5rem;\n    padding: 0 1rem;\n    border: none;\n    outline: none;\n    font-size: 1.2rem;\n\n    &:focus {\n      box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px,\n        rgba(0, 0, 0, 0.3) 0px 1px 3px -1px;\n    }\n  }\n  .error {\n    font-size: 1.1rem;\n    padding-bottom: 0.5rem;\n    span {\n      font-style: italic;\n      color: tomato;\n      margin-right: 0.3rem;\n      font-weight: 700;\n      font-size: 1.1rem;\n    }\n  }\n"]))),k=r(1868),z=function(){var n=(0,g.useState)(null),e=(0,m.Z)(n,2),r=e[0],t=e[1],i=(0,g.useState)(""),o=(0,m.Z)(i,2),a=o[0],u=o[1],s=(0,g.useState)([]),l=(0,m.Z)(s,2),c=l[0],f=l[1],C=(0,g.useState)(null),S=(0,m.Z)(C,2),_=S[0],z=S[1],D=(0,g.useState)(null),U=(0,m.Z)(D,2),L=U[0],Q=U[1],V=(0,g.useState)(null),G=(0,m.Z)(V,2),I=G[0],J=G[1],H=(0,h.s0)(),X=(0,b.qX)(),F=(0,m.Z)(X,2),$=F[0],K=F[1],W=K.data,Y=K.isError,nn=K.error,en=K.isLoading,rn=K.isSuccess;(0,g.useEffect)((function(){Y&&p.Am.error(null===nn||void 0===nn?void 0:nn.message),rn&&(p.Am.success(null===W||void 0===W?void 0:W.message),H("/admin/products"))}),[Y,rn,null===W||void 0===W?void 0:W.message,null===nn||void 0===nn?void 0:nn.message,H]),(0,g.useEffect)((function(){r&&z(null),(null===c||void 0===c?void 0:c.length)>0&&J(null),a&&a.split(" ").length<10?Q("Description must have at least 10 word."):Q(null)}),[r,c,a]);var tn=(0,k.aH)().data;return(0,E.jsxs)(A,{children:[(0,E.jsx)(P.Z,{variant:"h2",text:"Create Product"}),(0,E.jsx)(O,{children:(0,E.jsx)(v.J9,{initialValues:{name:"",price:"",brand:"",stock:""},validationSchema:x.Ry({name:x.Z_().required("Product name is required.").min(3,"Product name must have at least 3 characters."),price:x.Rx().required("Product price is required.").max(1e5,"Maximum product price 100000"),brand:x.Z_(),stock:x.Rx().min(1,"Product stock must be greater than or equal 1").required("Product stock  is required.")}),onSubmit:function(n,e){e.setSubmitting;if(!a||!r||0===(null===c||void 0===c?void 0:c.length))return r||z("Category is required."),a||Q("Description is required."),void(0===(null===c||void 0===c?void 0:c.length)&&J("Product image is required."));(0,q.Z)(c).then((function(e){var t=e.map((function(n){return{public_id:n.public_id,url:n.secure_url}})),i=(0,d.Z)((0,d.Z)({},n),{},{category:null===r||void 0===r?void 0:r.slug,description:a,images:t});$(i)})).catch((function(n){J("There was an error while uploadin images.")}))},children:(0,E.jsxs)(v.l0,{children:[(0,E.jsx)(y.Z,{label:"Name",name:"name",type:"text",placeholder:"Enter your product name"}),(0,E.jsx)(y.Z,{label:"Price",name:"price",type:"number",placeholder:"Enter your product price"}),(0,E.jsxs)(T,{label:"Brand",name:"brand",children:[(0,E.jsx)("option",{value:"",children:"Choose a brand"}),null===tn||void 0===tn?void 0:tn.brands.map((function(n){return(0,E.jsx)("option",{value:null===n||void 0===n?void 0:n.slug,children:null===n||void 0===n?void 0:n.name},null===n||void 0===n?void 0:n._id)}))]}),(0,E.jsx)(y.Z,{label:"Stock",name:"stock",type:"number",placeholder:"Product stock"}),(0,E.jsx)(B,{children:(0,E.jsx)(Z.Z,{label:"Category",category:r,setCategory:t,categoryError:_,setCategoryError:z})}),(0,E.jsx)(N,{children:(0,E.jsx)(j.Z,{label:"Description",richText:a,setRichText:u,richTextError:L,setRichTextError:Q})}),(0,E.jsx)(M,{children:(0,E.jsx)(w.Z,{label:"Product Images",images:c,setImages:f,imagesError:I,setImagesError:J})}),(0,E.jsx)("br",{}),(0,E.jsx)(R,{type:"submit",disabled:en,children:"Submit"})]})})})]})},A=f.ZP.div(i||(i=(0,c.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 2rem;\n  width: 100%;\n  max-width: 800px;\n  margin: 0 auto;\n"]))),O=f.ZP.div(o||(o=(0,c.Z)(["\n  border-radius: 0.5rem;\n  box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\n  padding: 5rem;\n  width: 100%;\n  @media screen and (max-width: 768px) {\n    /* margin: 0 5rem; */\n  }\n  @media screen and (max-width: 576px) {\n    /* padding: 2rem; */\n  }\n"]))),B=f.ZP.div(a||(a=(0,c.Z)([""]))),N=f.ZP.div(u||(u=(0,c.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n"]))),M=f.ZP.div(s||(s=(0,c.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n"]))),R=f.ZP.button(l||(l=(0,c.Z)(["\n  font-size: 1.3rem;\n  border: none;\n  background-color: var(--bg-primary);\n  padding: 1rem 2rem;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: all 0.5s;\n  &:hover {\n    color: #fff;\n    background-color: #ff6347f6;\n  }\n"])))},9993:function(n,e,r){var t,i=r(168),o=r(1413),a=(r(2791),r(4603)),u=r(184);e.Z=function(n){var e=n.text,r=void 0===e?"There was an error!":e,t=n.style;return(0,u.jsx)(s,{style:(0,o.Z)({color:"red"},t),children:r})};var s=a.ZP.div(t||(t=(0,i.Z)(["\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  display: flex;\n  align-items: center;\n"])))},1197:function(n,e,r){var t,i=r(168),o=r(1413),a=r(885),u=r(5987),s=r(5705),l=r(4603),c=r(3242),d=r(184),m=["label"];e.Z=function(n){var e=n.label,r=(0,u.Z)(n,m),t=(0,s.U$)(r),i=(0,a.Z)(t,2),l=i[0],f=i[1];return(0,d.jsxs)(g,{children:[(0,d.jsx)("label",{htmlFor:r.id||r.name,children:e}),(0,d.jsx)("input",(0,o.Z)((0,o.Z)({},l),r)),f.touched&&f.error&&(0,d.jsx)(c.Z,{message:f.error})]})};var g=l.ZP.div(t||(t=(0,i.Z)(["\n  margin-bottom: 1.5rem;\n  label {\n    color: var(--text-secondary);\n    font-size: 1.3rem;\n  }\n  input {\n    color: var(--text-secondary);\n    width: 100%;\n    height: 3.5rem;\n    padding: 0 1rem;\n    margin-top: 0.5rem;\n    border: none;\n    outline: none;\n    &:focus {\n      box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px,\n        rgba(0, 0, 0, 0.3) 0px 1px 3px -1px;\n      color: #000;\n    }\n    &::placeholder {\n      font-size: 1.3rem;\n    }\n  }\n"])))},2958:function(n,e,r){var t=r(5861),i=r(7757),o=r.n(i),a=r(4569),u=r.n(a),s=function(){var n=(0,t.Z)(o().mark((function n(e){var r,t,i,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(r=[],t=0;t<e.length;t++)r.push(e[t]);return i=r.map((function(n){return new Promise((function(e,r){var t=new FileReader;t.readAsDataURL(n),t.onload=function(r){var t=n.name.split(".")[0];e({base64:r.target.result,options:{public_id:t,tags:[t]}})}}))})),n.next=5,Promise.all(i);case 5:return a=n.sent,n.abrupt("return",new Promise((function(n,e){u().post("/api/v1/media/uploadImage",{images:a}).then((function(e){n(e.data.urls)})).catch((function(n){e(n)}))})));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();e.Z=s},7528:function(n,e,r){var t,i=r(168),o=r(2982),a=r(885),u=r(2791),s=r(1539),l=r(4603),c=r(9993),d=r(3242),m=r(184);e.Z=function(n){var e,r=n.label,t=n.category,i=n.setCategory,l=n.categoryError,f=n.setCategoryError,p=(0,u.useState)(""),h=(0,a.Z)(p,2),v=h[0],x=h[1],y=(0,u.useState)([]),b=(0,a.Z)(y,2),Z=b[0],j=b[1],w=(0,s.QX)(),P=w.data,q=w.isLoading,C=w.isError,E=w.error,S=w.isSuccess,T=function(n,e){0===e&&x(n.target.value);var r=JSON.parse(n.target.value),t=r._id,a=r.slug,u=r.children;if(!a)return i(null),j([]),void x(JSON.stringify({}));i({_id:t,slug:a}),j((function(n){var r=n.slice(0,e);return u?[].concat((0,o.Z)(r),[u]):r}))};return(0,m.jsxs)(g,{children:[(0,m.jsx)("label",{children:r}),q&&(0,m.jsx)("div",{children:"Loading..."}),C&&(0,m.jsx)(c.Z,{text:E.message}),S&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("select",{value:v,onChange:function(n){return T(n,0)},onBlur:function(){!t&&f&&f("Category is required.")},children:[(0,m.jsx)("option",{value:JSON.stringify({}),children:"Select a category"}),null===P||void 0===P||null===(e=P.category)||void 0===e?void 0:e.map((function(n){return(0,m.jsx)("option",{value:JSON.stringify(n),children:n.name},n._id)}))]}),null===Z||void 0===Z?void 0:Z.map((function(n,e){return(0,m.jsxs)("select",{onChange:function(n){return T(n,e+1)},children:[(0,m.jsx)("option",{value:JSON.stringify({}),children:"Select a sub-category"}),null===n||void 0===n?void 0:n.map((function(n){return(0,m.jsx)("option",{value:JSON.stringify(n),children:n.name},n._id)}))]},e)}))]}),l&&(0,m.jsx)(d.Z,{message:l})]})};var g=l.ZP.div(t||(t=(0,i.Z)(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 1.5rem;\n  label {\n    font-size: 1.3rem;\n    color: var(--text-secondary);\n  }\n  select {\n    background: #fff;\n    color: var(--text-secondary);\n    margin-top: 0.5rem;\n    width: 100%;\n    height: 3.5rem;\n    padding: 0 1rem;\n    border: none;\n    outline: none;\n    font-size: 1.3rem;\n    &:focus {\n      box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px,\n        rgba(0, 0, 0, 0.3) 0px 1px 3px -1px;\n      color: #000;\n    }\n    &::placeholder {\n      font-size: 1.2rem;\n    }\n  }\n"])))},905:function(n,e,r){var t,i=r(168),o=r(885),a=r(2791),u=r(4603),s=r(3242),l=r(184);e.Z=function(n){var e=n.label,r=n.images,t=n.setImages,i=n.imagesError,u=n.setImagesError,d=(0,a.useState)(null),m=(0,o.Z)(d,2),g=m[0],f=m[1],p=(0,a.useState)(null),h=(0,o.Z)(p,2),v=h[0],x=h[1];(0,a.useEffect)((function(){if(g){t(g);for(var n=[],e=0;e<g.length;e++)n.push(URL.createObjectURL(g[e]));x(n)}}),[g,t]);return(0,l.jsxs)(c,{children:[e&&(0,l.jsx)("label",{children:e}),(null===v||void 0===v?void 0:v.length)>0&&(0,l.jsx)("div",{className:"image_list",children:null===v||void 0===v?void 0:v.map((function(n,e){return(0,l.jsxs)("div",{className:"img_box",children:[(0,l.jsx)("img",{src:n,alt:"product"}),(0,l.jsxs)("svg",{onClick:function(){return n=e,void f((function(e){for(var r=new DataTransfer,t=0;t<e.length;t++){var i=e[t];n!==t&&r.items.add(i)}return r.files}));var n},xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-trash",viewBox:"0 0 16 16",children:[(0,l.jsx)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6Z"}),(0,l.jsx)("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1ZM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118ZM2.5 3h11V2h-11v1Z"})]})]},e)}))}),(0,l.jsx)("input",{type:"file",multiple:!0,onChange:function(n){f((function(e){if(!e)return n.target.files;for(var r=new DataTransfer,t=0;t<e.length;t++){var i=e[t];r.items.add(i)}for(var o=0;o<n.target.files.length;o++){var a=n.target.files[o];r.items.add(a)}return r.files}))},onBlur:function(){(!r||0===r.length)&&u("Product image is required.")},accept:"image/*"}),i&&(0,l.jsx)(s.Z,{message:i})]})};var c=u.ZP.div(t||(t=(0,i.Z)(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 1.5rem;\n\n  label {\n    font-size: 1.3rem;\n    color: var(--text-secondary);\n  }\n\n  .image_list {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(110px, auto));\n    gap: 1rem;\n    margin-bottom: 1rem;\n    user-select: none;\n    border: 1px solid #ccc;\n    padding: 1rem;\n\n    .img_box {\n      width: 100%;\n      position: relative;\n      img {\n        width: 100%;\n        height: 100%;\n      }\n      svg {\n        position: absolute;\n        top: 3px;\n        right: 3px;\n        cursor: pointer;\n        &:hover {\n          fill: red;\n        }\n      }\n    }\n  }\n\n  input {\n    width: 100%;\n    max-width: 20rem;\n    margin-top: 0.5rem;\n  }\n"])))},6316:function(n,e,r){var t,i=r(168),o=(r(2791),r(6770)),a=r.n(o),u=r(4603),s=(r(6009),r(3242)),l=r(184),c=[["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]];e.Z=function(n){var e=n.label,r=n.richText,t=n.setRichText,i=n.richTextError,o=n.setRichTextError;return(0,l.jsxs)(d,{children:[(0,l.jsx)("label",{children:e}),(0,l.jsx)("div",{className:"quill_container",children:(0,l.jsx)(a(),{theme:"snow",value:r,onChange:t,modules:{toolbar:c},onBlur:function(){!r&&o("Description is required.")}})}),i&&(0,l.jsx)(s.Z,{message:i})]})};var d=u.ZP.div(t||(t=(0,i.Z)(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 1.5rem;\n  label {\n    font-size: 1.3rem;\n    color: var(--text-secondary);\n  }\n\n  .quill_container {\n    margin-top: 0.5rem;\n    .ql-toolbar.ql-snow {\n      @media screen and (max-width: 576px) {\n        padding: 0;\n      }\n    }\n\n    .error {\n      font-size: 1.1rem;\n      padding: 1rem 0;\n      span {\n        font-style: italic;\n        color: tomato;\n        margin-right: 0.3rem;\n        font-weight: 700;\n        font-size: 1.1rem;\n      }\n    }\n  }\n"])))},8361:function(n,e,r){var t,i=r(168),o=(r(2791),r(4603)),a=r(184);e.Z=function(n){var e=n.variant,r=void 0===e?"h1":e,t=n.text,i=n.style;return(0,a.jsxs)(u,{style:i,children:["h1"===r&&(0,a.jsx)("h1",{children:t}),"h2"===r&&(0,a.jsx)("h2",{children:t}),"h3"===r&&(0,a.jsx)("h3",{children:t})]})};var u=o.ZP.div(t||(t=(0,i.Z)(["\n  width: 100%;\n  color: var(--text-primary);\n\n  h1 {\n    font-size: 2.4rem;\n    font-weight: 500;\n  }\n\n  h2 {\n    font-size: 2rem;\n    font-weight: 500;\n  }\n"])))},3242:function(n,e,r){var t,i=r(168),o=(r(2791),r(4603)),a=r(184);e.Z=function(n){var e=n.message;return(0,a.jsxs)(u,{className:"error",children:[(0,a.jsx)("span",{children:"i"})," ",e]})};var u=o.ZP.div(t||(t=(0,i.Z)(["\n  font-size: 1.1rem;\n  padding: 0.5rem 0;\n  span {\n    font-style: italic;\n    color: tomato;\n    margin-right: 0.3rem;\n    font-weight: 700;\n    font-size: 1.1rem;\n  }\n"])))},1868:function(n,e,r){r.d(e,{aH:function(){return i},X9:function(){return o},f0:function(){return a},rQ:function(){return u}});var t=r(4473).Z.injectEndpoints({endpoints:function(n){return{getAllBrand:n.query({query:function(){return{url:"brands"}},providesTags:["Brands"]}),createBrand:n.mutation({query:function(n){return{url:"admin/brand",method:"POST",body:n}},invalidatesTags:["Brands"]}),updateBrand:n.mutation({query:function(n){var e=n.id,r=n.brand;return{url:"admin/brand/".concat(e),method:"PUT",body:r}},invalidatesTags:["Brands"]}),deleteBrand:n.mutation({query:function(n){return{url:"admin/brand/".concat(n),method:"DELETE"}},invalidatesTags:["Brands"]})}}}),i=t.useGetAllBrandQuery,o=t.useCreateBrandMutation,a=t.useUpdateBrandMutation,u=t.useDeleteBrandMutation},1539:function(n,e,r){r.d(e,{QX:function(){return i},R5:function(){return o},m7:function(){return a},pi:function(){return u},l8:function(){return s}});var t=r(4473).Z.injectEndpoints({endpoints:function(n){return{getAllCategory:n.query({query:function(){return{url:"categories"}},providesTags:["Categories"]}),getAdminCategory:n.query({query:function(){return{url:"admin/categories"}},providesTags:["AdminCategories"]}),createCategory:n.mutation({query:function(n){return{url:"admin/categories",method:"POST",body:n}},invalidatesTags:["Categories","AdminCategories"]}),updateCategory:n.mutation({query:function(n){var e=n.id,r=n.category;return{url:"admin/categories/".concat(e),method:"PUT",body:r}},invalidatesTags:["Categories","AdminCategories"]}),deleteCategory:n.mutation({query:function(n){return{url:"admin/categories/".concat(n),method:"DELETE"}},invalidatesTags:["Categories","AdminCategories"]})}}}),i=t.useGetAllCategoryQuery,o=t.useGetAdminCategoryQuery,a=t.useCreateCategoryMutation,u=t.useUpdateCategoryMutation,s=t.useDeleteCategoryMutation},8650:function(n,e,r){r.d(e,{C$:function(){return i},lZ:function(){return o},xq:function(){return a},fp:function(){return u},KR:function(){return s},qX:function(){return l},wE:function(){return c}});var t=r(4473).Z.injectEndpoints({endpoints:function(n){return{getProducts:n.query({query:function(n){return{url:"products?".concat(n)}}}),getProduct:n.query({query:function(n){return{url:"product/".concat(n)}}}),deleteProduct:n.mutation({query:function(n){return{url:"admin/product/".concat(n),method:"DELETE"}}}),getNewArivalsCategories:n.query({query:function(){return{url:"products/new-arrivals-categories"}}}),getNewArivals:n.query({query:function(n){var e=n.category,r=n.currentPage;return{url:"products/new-arrivals?category=".concat(e,"&page=").concat(r)}}}),createProduct:n.mutation({query:function(n){return{url:"admin/product/new",method:"POST",body:n}}}),updateProduct:n.mutation({query:function(n){var e=n.id,r=n.product;return{url:"admin/product/".concat(e),method:"PUT",body:r}}})}}}),i=t.useGetProductsQuery,o=t.useGetProductQuery,a=t.useDeleteProductMutation,u=t.useGetNewArivalsCategoriesQuery,s=t.useGetNewArivalsQuery,l=t.useCreateProductMutation,c=t.useUpdateProductMutation},7326:function(n,e,r){function t(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}r.d(e,{Z:function(){return t}})},5987:function(n,e,r){r.d(e,{Z:function(){return i}});var t=r(3366);function i(n,e){if(null==n)return{};var r,i,o=(0,t.Z)(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}},9611:function(n,e,r){function t(n,e){return t=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n},t(n,e)}r.d(e,{Z:function(){return t}})}}]);
//# sourceMappingURL=710.b9d992af.chunk.js.map