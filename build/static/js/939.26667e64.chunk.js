"use strict";(self.webpackChunkdigimart_frontend=self.webpackChunkdigimart_frontend||[]).push([[939],{3017:function(e,n,r){r.r(n);var t,i,a,o,l,s=r(168),d=r(1413),u=r(885),c=r(2791),m=r(4603),p=r(6960),h=r(6871),v=r(5705),x=r(1089),g=r(1197),f=r(8650),b=r(7528),Z=r(6316),j=r(905),y=r(8361),P=r(2958),w=r(9814),S=r(1868),E=r(2651),_=r(184);n.default=function(){var e=(0,c.useState)([]),n=(0,u.Z)(e,2),r=n[0],t=n[1],i=(0,c.useState)(""),a=(0,u.Z)(i,2),o=a[0],l=a[1],s=(0,c.useState)([]),m=(0,u.Z)(s,2),T=m[0],D=m[1],I=(0,c.useState)(null),A=(0,u.Z)(I,2),B=A[0],H=A[1],J=(0,c.useState)(null),L=(0,u.Z)(J,2),M=L[0],N=L[1],V=(0,c.useState)(null),X=(0,u.Z)(V,2),z=X[0],F=X[1],G=(0,h.s0)(),K=(0,f.qX)(),Q=(0,u.Z)(K,2),U=Q[0],W=Q[1],Y=W.data,$=W.isError,ee=W.error,ne=W.isLoading,re=W.isSuccess;(0,c.useEffect)((function(){$&&p.Am.error(null===ee||void 0===ee?void 0:ee.message),re&&(p.Am.success(null===Y||void 0===Y?void 0:Y.message),G("/admin/products"))}),[$,re,null===Y||void 0===Y?void 0:Y.message,null===ee||void 0===ee?void 0:ee.message,G]),(0,c.useEffect)((function(){(null===r||void 0===r?void 0:r.length)>0&&H(null),(null===T||void 0===T?void 0:T.length)>0&&F(null),o&&o.split(" ").length<10?N("Description must have at least 10 word."):N(null)}),[null===r||void 0===r?void 0:r.length,T,o]);var te=(0,S.aH)().data;return(0,_.jsxs)(k,{children:[(0,_.jsx)(y.Z,{variant:"h2",text:"Create Product"}),(0,_.jsx)(q,{children:(0,_.jsx)(v.J9,{initialValues:{name:"",price:"",brand:"",stock:""},validationSchema:x.Ry({name:x.Z_().required("Product name is required.").min(3,"Product name must have at least 3 characters."),price:x.Rx().required("Product price is required.").max(1e5,"Maximum product price 100000"),brand:x.Z_(),stock:x.Rx().min(1,"Product stock must be greater than or equal 1").required("Product stock  is required.")}),onSubmit:function(e,n){n.setSubmitting;return null!==r&&void 0!==r&&r.length&&o&&null!==T&&void 0!==T&&T.length?o&&o.split(" ").length<10?N("Description must have at least 10 word."):void(0,P.Z)(T,"products").then((function(n){var t=n.map((function(e){return{public_id:e.public_id,url:e.secure_url}})),i=(0,d.Z)((0,d.Z)({},e),{},{categories:r,description:o,images:t});U(i)})).catch((function(e){F("There was an error while uploading images.")})):(null!==r&&void 0!==r&&r.length||H("Category is required."),o||N("Description is required."),void(null!==T&&void 0!==T&&T.length||F("Product image is required.")))},children:(0,_.jsxs)(v.l0,{children:[(0,_.jsx)(g.Z,{label:"Name",name:"name",type:"text",placeholder:"Enter your product name"}),(0,_.jsx)(g.Z,{label:"Price",name:"price",type:"number",placeholder:"Enter your product price"}),(0,_.jsxs)(w.Z,{label:"Brand",name:"brand",children:[(0,_.jsx)("option",{value:"",children:"Choose a brand"}),null===te||void 0===te?void 0:te.brands.map((function(e){return(0,_.jsx)("option",{value:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id)}))]}),(0,_.jsx)(g.Z,{label:"Stock",name:"stock",type:"number",placeholder:"Product stock"}),(0,_.jsx)(C,{children:(0,_.jsx)(b.Z,{label:"Category",categories:r,setCategories:t,categoriesError:B,setCategoriesError:H})}),(0,_.jsx)(O,{children:(0,_.jsx)(Z.Z,{label:"Description",richText:o,setRichText:l,richTextError:M,setRichTextError:N})}),(0,_.jsx)(R,{children:(0,_.jsx)(j.Z,{label:"Product Images",images:T,setImages:D,imagesError:z,setImagesError:F})}),(0,_.jsx)("br",{}),(0,_.jsx)(E.Z,{type:"submit",disabled:ne,text:"Submit"})]})})})]})};var k=m.ZP.div(t||(t=(0,s.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 2rem;\n  width: 100%;\n  max-width: 800px;\n  margin: 0 auto;\n"]))),q=m.ZP.div(i||(i=(0,s.Z)(["\n  border-radius: 0.5rem;\n  box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\n  padding: 5rem;\n  width: 100%;\n  @media screen and (max-width: 768px) {\n    /* margin: 0 5rem; */\n  }\n  @media screen and (max-width: 576px) {\n    /* padding: 2rem; */\n  }\n"]))),C=m.ZP.div(a||(a=(0,s.Z)([""]))),O=m.ZP.div(o||(o=(0,s.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n"]))),R=m.ZP.div(l||(l=(0,s.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n"])))},7326:function(e,n,r){function t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(n,{Z:function(){return t}})},5987:function(e,n,r){r.d(n,{Z:function(){return i}});var t=r(3366);function i(e,n){if(null==e)return{};var r,i,a=(0,t.Z)(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}},9611:function(e,n,r){function t(e,n){return t=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},t(e,n)}r.d(n,{Z:function(){return t}})}}]);
//# sourceMappingURL=939.26667e64.chunk.js.map