"use strict";(self.webpackChunkdigimart_frontend=self.webpackChunkdigimart_frontend||[]).push([[939],{3017:function(e,n,r){r.r(n);var t,i,o,a,l,u=r(168),s=r(1413),d=r(9439),c=r(2791),m=r(4603),p=r(6960),h=r(6871),v=r(5705),f=r(1089),g=r(1197),x=r(8650),b=r(7528),Z=r(6316),j=r(905),y=r(8361),P=r(2958),w=r(9814),S=r(1868),E=r(2651),k=r(184);n.default=function(){var e=(0,c.useState)([]),n=(0,d.Z)(e,2),r=n[0],t=n[1],i=(0,c.useState)(""),o=(0,d.Z)(i,2),a=o[0],l=o[1],u=(0,c.useState)([]),m=(0,d.Z)(u,2),T=m[0],D=m[1],I=(0,c.useState)(null),A=(0,d.Z)(I,2),B=A[0],H=A[1],J=(0,c.useState)(null),L=(0,d.Z)(J,2),M=L[0],N=L[1],V=(0,c.useState)(null),X=(0,d.Z)(V,2),z=X[0],F=X[1],G=(0,h.s0)(),K=(0,x.qX)(),Q=(0,d.Z)(K,2),U=Q[0],W=Q[1],Y=W.data,$=W.isError,ee=W.error,ne=W.isLoading,re=W.isSuccess;(0,c.useEffect)((function(){$&&p.Am.error(null===ee||void 0===ee?void 0:ee.message),re&&(p.Am.success(null===Y||void 0===Y?void 0:Y.message),G("/admin/products"))}),[$,re,null===Y||void 0===Y?void 0:Y.message,null===ee||void 0===ee?void 0:ee.message,G]),(0,c.useEffect)((function(){(null===r||void 0===r?void 0:r.length)>0&&H(null),(null===T||void 0===T?void 0:T.length)>0&&F(null),a&&a.split(" ").length<10?N("Description must have at least 10 word."):N(null)}),[null===r||void 0===r?void 0:r.length,T,a]);var te=(0,S.aH)().data;return(0,k.jsxs)(_,{children:[(0,k.jsx)(y.Z,{variant:"h2",text:"Create Product"}),(0,k.jsx)(q,{children:(0,k.jsx)(v.J9,{initialValues:{name:"",price:"",brand:"",stock:""},validationSchema:f.Ry({name:f.Z_().required("Product name is required.").min(3,"Product name must have at least 3 characters."),price:f.Rx().required("Product price is required.").max(1e5,"Maximum product price 100000"),brand:f.Z_(),stock:f.Rx().min(1,"Product stock must be greater than or equal 1").required("Product stock  is required.")}),onSubmit:function(e,n){n.setSubmitting;return null!==r&&void 0!==r&&r.length&&a&&null!==T&&void 0!==T&&T.length?a&&a.split(" ").length<10?N("Description must have at least 10 word."):void(0,P.Z)(T,"products").then((function(n){var t=n.map((function(e){return{public_id:e.public_id,url:e.secure_url}})),i=(0,s.Z)((0,s.Z)({},e),{},{categories:r,description:a,images:t});U(i)})).catch((function(e){F("There was an error while uploading images.")})):(null!==r&&void 0!==r&&r.length||H("Category is required."),a||N("Description is required."),void(null!==T&&void 0!==T&&T.length||F("Product image is required.")))},children:(0,k.jsxs)(v.l0,{children:[(0,k.jsx)(g.Z,{label:"Name",name:"name",type:"text",placeholder:"Enter your product name"}),(0,k.jsx)(g.Z,{label:"Price",name:"price",type:"number",placeholder:"Enter your product price"}),(0,k.jsxs)(w.Z,{label:"Brand",name:"brand",children:[(0,k.jsx)("option",{value:"",children:"Choose a brand"}),null===te||void 0===te?void 0:te.brands.map((function(e){return(0,k.jsx)("option",{value:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id)}))]}),(0,k.jsx)(g.Z,{label:"Stock",name:"stock",type:"number",placeholder:"Product stock"}),(0,k.jsx)(O,{children:(0,k.jsx)(b.Z,{label:"Category",categories:r,setCategories:t,categoriesError:B,setCategoriesError:H})}),(0,k.jsx)(C,{children:(0,k.jsx)(Z.Z,{label:"Description",richText:a,setRichText:l,richTextError:M,setRichTextError:N})}),(0,k.jsx)(R,{children:(0,k.jsx)(j.Z,{label:"Product Images",images:T,setImages:D,imagesError:z,setImagesError:F})}),(0,k.jsx)("br",{}),(0,k.jsx)(E.Z,{type:"submit",disabled:ne,text:"Submit"})]})})})]})};var _=m.ZP.div(t||(t=(0,u.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 2rem;\n  width: 100%;\n  max-width: 800px;\n  margin: 0 auto;\n"]))),q=m.ZP.div(i||(i=(0,u.Z)(["\n  border-radius: 0.5rem;\n  box-shadow: var(--shadow-1);\n  padding: 5rem;\n  width: 100%;\n  @media screen and (max-width: 768px) {\n    /* margin: 0 5rem; */\n  }\n  @media screen and (max-width: 576px) {\n    /* padding: 2rem; */\n  }\n"]))),O=m.ZP.div(o||(o=(0,u.Z)([""]))),C=m.ZP.div(a||(a=(0,u.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n"]))),R=m.ZP.div(l||(l=(0,u.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n"])))},7326:function(e,n,r){function t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(n,{Z:function(){return t}})},5987:function(e,n,r){r.d(n,{Z:function(){return i}});var t=r(3366);function i(e,n){if(null==e)return{};var r,i,o=(0,t.Z)(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}},3366:function(e,n,r){function t(e,n){if(null==e)return{};var r,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}r.d(n,{Z:function(){return t}})},9611:function(e,n,r){function t(e,n){return t=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},t(e,n)}r.d(n,{Z:function(){return t}})}}]);
//# sourceMappingURL=939.f0f31658.chunk.js.map