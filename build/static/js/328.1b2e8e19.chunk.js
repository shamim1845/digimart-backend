"use strict";(self.webpackChunkdigimart_frontend=self.webpackChunkdigimart_frontend||[]).push([[328],{5328:function(e,n,r){r.r(n);var i,a,l,t,o,d,s=r(168),u=r(9439),m=r(2791),c=r(4569),h=r.n(c),p=r(6960),v=r(4603),x=r(5705),f=r(1089),g=r(2958),b=r(6871),j=r(8361),y=r(2978),Z=r(9290),w=r(5821),P=r(184);n.default=function(){var e,n=(0,m.useState)(!1),r=(0,u.Z)(n,2),i=r[0],a=r[1],l=(0,m.useState)(null),t=(0,u.Z)(l,2),o=t[0],d=t[1],s=(0,m.useState)(!1),c=(0,u.Z)(s,2),v=c[0],z=c[1],A=(0,b.s0)(),N=(0,y.I0)(),R=(0,y.v9)(Z.S8),E=(0,x.TA)({initialValues:{name:(null===R||void 0===R?void 0:R.name)||"",email:(null===R||void 0===R?void 0:R.email)||"",mobile:(null===R||void 0===R?void 0:R.mobile)||"",birthday:(null===R||void 0===R?void 0:R.birthday)||"",gender:(null===R||void 0===R?void 0:R.gender)||""},enableReinitialize:!0,validationSchema:f.Ry({name:f.Z_().required("Name is required.").min(3,"Name must have at least 3 characters."),email:f.Z_().required("Email is required.").email("Email must be a valid email."),mobile:f.Z_().max(11).required("Phone Number is required."),birthday:f.Z_().required("Date of birth is required."),gender:f.Z_().required("Gender  is required.")}),onSubmit:function(e,n){n.resetForm;z(!0);var r=e.name,i=e.email,a=e.mobile,l=e.birthday,t=e.gender;function d(){var e,n,o,d,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u={public_id:null!==(e=s[0])&&void 0!==e&&e.public_id?null===(n=s[0])||void 0===n?void 0:n.public_id:R.avatar.public_id,url:null!==(o=s[0])&&void 0!==o&&o.secure_url?null===(d=s[0])||void 0===d?void 0:d.secure_url:R.avatar.url};h().put("/api/v1/profile/update",{name:r,email:i,avatar:u,mobile:a,birthday:l,gender:t}).then((function(e){200===e.status&&e.data.success?(p.Am.success("Profile update Sucessfully."),N((0,w.$8)()),setTimeout((function(){A("/account/myprofile")}),3e3)):p.Am.info(e.data.message)})).catch((function(e){console.log(e.message),p.Am.error(e.message)}))}o?(0,g.Z)(o,"user").then((function(e){d(e)})):d()}});return(0,P.jsxs)(C,{children:[(0,P.jsx)(j.Z,{variant:"h1",text:"Update Profile",style:{textAlign:"center",marginTop:"2rem"}}),(0,P.jsxs)(_,{children:[(0,P.jsx)(q,{onClick:function(){return a(!0)},children:(0,P.jsx)("img",{src:null===R||void 0===R||null===(e=R.avatar)||void 0===e?void 0:e.url,alt:"profile_picture"})}),(0,P.jsxs)(F,{onSubmit:E.handleSubmit,children:[(0,P.jsxs)(S,{children:[i&&(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{htmlFor:"profilePic",children:"Profile Picture"}),(0,P.jsx)("input",{type:"file",name:"profilePic",onChange:function(e){return d(e.target.files)}})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{htmlFor:"name",children:" Full Name"}),(0,P.jsx)("input",{type:"name",name:"name",onChange:E.handleChange,value:E.values.name}),E.touched.name&&E.errors.name&&(0,P.jsxs)("p",{children:[(0,P.jsx)("span",{children:"i"})," ",E.errors.name," "]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{htmlFor:"email",children:"Email"}),(0,P.jsx)("input",{type:"email",name:"email",onChange:E.handleChange,value:E.values.email}),E.touched.email&&E.errors.email&&(0,P.jsxs)("p",{children:[(0,P.jsx)("span",{children:"i"})," ",E.errors.email," "]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{htmlFor:"mobile",children:"Mobile"}),(0,P.jsx)("input",{type:"tel",name:"mobile",onChange:E.handleChange,value:E.values.mobile}),E.touched.mobile&&E.errors.mobile&&(0,P.jsxs)("p",{children:[(0,P.jsx)("span",{children:"i"})," ",E.errors.mobile," "]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{htmlFor:"birthday",children:"Birthday"}),(0,P.jsx)("input",{type:"date",name:"birthday",onChange:E.handleChange,value:E.values.birthday}),E.touched.birthday&&E.errors.birthday&&(0,P.jsxs)("p",{children:[(0,P.jsx)("span",{children:"i"})," ",E.errors.birthday]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{htmlFor:"gender",children:"Gender :"}),(0,P.jsxs)("select",{onChange:E.handleChange,value:E.values.gender,name:"gender",children:[(0,P.jsx)("option",{value:"",children:"Choose"}),(0,P.jsx)("option",{value:"male",children:"Male"}),(0,P.jsx)("option",{value:"female",children:"Female"})]}),E.touched.gender&&E.errors.gender&&(0,P.jsxs)("p",{children:[(0,P.jsx)("span",{children:"i"})," ",E.errors.gender," "]})]})]}),(0,P.jsx)(k,{children:(0,P.jsx)("input",{onClick:E.handleSubmit,type:"submit",value:"Update Profile",disabled:v})})]})]})]})};var C=v.ZP.div(i||(i=(0,s.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 2rem;\n  width: 100%;\n  max-width: 800px;\n  margin-bottom: 3rem;\n"]))),_=v.ZP.div(a||(a=(0,s.Z)(["\n  border-radius: 0.5rem;\n  box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\n  padding: 5rem;\n  margin: 2rem;\n  width: 90%;\n  @media screen and (max-width: 768px) {\n    margin: 0 5rem;\n  }\n  @media screen and (max-width: 576px) {\n    padding: 2rem;\n  }\n"]))),q=v.ZP.div(l||(l=(0,s.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 2rem;\n  margin-bottom: 2rem;\n  &:hover {\n    cursor: pointer;\n  }\n\n  img {\n    width: 13rem;\n    height: 13rem;\n    border-radius: 50%;\n    object-fit: cover;\n  }\n"]))),F=v.ZP.form(t||(t=(0,s.Z)(["\n  width: 100%;\n  height: 100%;\n"]))),S=v.ZP.div(o||(o=(0,s.Z)(['\n  div {\n    margin: 1rem 0;\n    & label {\n      font-size: 1.3rem;\n      color: var(--text-secondary);\n    }\n\n    & input {\n      width: 100%;\n      height: 3.5rem;\n      padding: 0 1rem;\n      border: none;\n      outline: none;\n      &:focus {\n        box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px,\n          rgba(0, 0, 0, 0.3) 0px 1px 3px -1px;\n      }\n      &::placeholder {\n        padding-left: 0.5rem;\n        font-size: 1.3rem;\n      }\n    }\n    & input[type="file"] {\n      padding: 0.5rem 0;\n    }\n\n    p {\n      font-size: 1.1rem;\n      span {\n        font-style: italic;\n        color: tomato;\n        margin: 1.3rem 0.4rem 0 0;\n        font-weight: 700;\n        font-size: 1.3rem;\n      }\n    }\n  }\n']))),k=v.ZP.div(d||(d=(0,s.Z)(["\n  & input {\n    font-size: 1.3rem;\n    border: none;\n    background-color: var(--bg-primary);\n    padding: 1rem 2rem;\n    border-radius: 5px;\n    margin-bottom: 1rem;\n    cursor: pointer;\n    transition: all 0.5s;\n    &:hover {\n      color: #fff;\n      background-color: #ff6347f6;\n    }\n  }\n"])))},2958:function(e,n,r){var i=r(5861),a=r(7757),l=r.n(a),t=r(4569),o=r.n(t),d=function(){var e=(0,i.Z)(l().mark((function e(n,r){var i,a,t,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=[],a=0;a<n.length;a++)i.push(n[a]);return t=i.map((function(e){return new Promise((function(n,r){try{var i=new FileReader;i.readAsDataURL(e),i.onload=function(r){var i=e.name.split(".")[0];n({base64:r.target.result,options:{public_id:i,tags:[i]}})}}catch(a){console.error(a),r(null===a||void 0===a?void 0:a.message)}}))})),e.next=5,Promise.all(t);case 5:return d=e.sent,e.abrupt("return",new Promise((function(e,n){o().post("/api/v1/media/uploadImages",{images:d,folder:r}).then((function(n){e(n.data.urls)})).catch((function(e){n(e)}))})));case 7:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}();n.Z=d}}]);
//# sourceMappingURL=328.1b2e8e19.chunk.js.map