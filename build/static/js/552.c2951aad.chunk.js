"use strict";(self.webpackChunkdigimart_frontend=self.webpackChunkdigimart_frontend||[]).push([[552],{5328:function(e,n,r){r.r(n);var i,a,t,l,o,d,s=r(168),u=r(885),m=r(2791),c=r(4569),h=r.n(c),p=r(6960),f=r(4603),v=r(5705),b=r(1089),x=r(2958),g=r(6871),j=r(8361),y=r(2978),Z=r(9290),w=r(5821),_=r(184);n.default=function(){var e,n=(0,m.useState)(!1),r=(0,u.Z)(n,2),i=r[0],a=r[1],t=(0,m.useState)(null),l=(0,u.Z)(t,2),o=l[0],d=l[1],s=(0,m.useState)(!1),c=(0,u.Z)(s,2),f=c[0],z=c[1],A=(0,g.s0)(),R=(0,y.I0)(),E=(0,y.v9)(Z.S8),N=(0,v.TA)({initialValues:{name:(null===E||void 0===E?void 0:E.name)||"",email:(null===E||void 0===E?void 0:E.email)||"",mobile:(null===E||void 0===E?void 0:E.mobile)||"",birthday:(null===E||void 0===E?void 0:E.birthday)||"",gender:(null===E||void 0===E?void 0:E.gender)||""},enableReinitialize:!0,validationSchema:b.Ry({name:b.Z_().required("Name is required.").min(3,"Name must have at least 3 characters."),email:b.Z_().required("Email is required.").email("Email must be a valid email."),mobile:b.Z_().max(11).required("Phone Number is required."),birthday:b.Z_().required("Date of birth is required."),gender:b.Z_().required("Gender  is required.")}),onSubmit:function(e,n){n.resetForm;z(!0);var r=e.name,i=e.email,a=e.mobile,t=e.birthday,l=e.gender;function d(){var e,n,o,d,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u={public_id:null!==(e=s[0])&&void 0!==e&&e.public_id?null===(n=s[0])||void 0===n?void 0:n.public_id:E.avatar.public_id,url:null!==(o=s[0])&&void 0!==o&&o.secure_url?null===(d=s[0])||void 0===d?void 0:d.secure_url:E.avatar.url};h().put("/api/v1/profile/update",{name:r,email:i,avatar:u,mobile:a,birthday:t,gender:l}).then((function(e){200===e.status&&e.data.success?(p.Am.success("Profile update Sucessfully."),R((0,w.$8)()),setTimeout((function(){A("/account/myprofile")}),3e3)):p.Am.info(e.data.message)})).catch((function(e){console.log(e.message),p.Am.error(e.message)}))}o?(0,x.Z)(o,"user").then((function(e){d(e)})):d()}});return(0,_.jsxs)(P,{children:[(0,_.jsx)(j.Z,{variant:"h1",text:"Update Profile",style:{textAlign:"center",marginTop:"2rem"}}),(0,_.jsxs)(C,{children:[(0,_.jsx)(q,{onClick:function(){return a(!0)},children:(0,_.jsx)("img",{src:null===E||void 0===E||null===(e=E.avatar)||void 0===e?void 0:e.url,alt:"profile_picture"})}),(0,_.jsxs)(F,{onSubmit:N.handleSubmit,children:[(0,_.jsxs)(S,{children:[i&&(0,_.jsxs)("div",{children:[(0,_.jsx)("label",{htmlFor:"profilePic",children:"Profile Picture"}),(0,_.jsx)("input",{type:"file",name:"profilePic",onChange:function(e){return d(e.target.files)}})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("label",{htmlFor:"name",children:" Full Name"}),(0,_.jsx)("input",{type:"name",name:"name",onChange:N.handleChange,value:N.values.name}),N.touched.name&&N.errors.name&&(0,_.jsxs)("p",{children:[(0,_.jsx)("span",{children:"i"})," ",N.errors.name," "]})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("label",{htmlFor:"email",children:"Email"}),(0,_.jsx)("input",{type:"email",name:"email",onChange:N.handleChange,value:N.values.email}),N.touched.email&&N.errors.email&&(0,_.jsxs)("p",{children:[(0,_.jsx)("span",{children:"i"})," ",N.errors.email," "]})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("label",{htmlFor:"mobile",children:"Mobile"}),(0,_.jsx)("input",{type:"tel",name:"mobile",onChange:N.handleChange,value:N.values.mobile}),N.touched.mobile&&N.errors.mobile&&(0,_.jsxs)("p",{children:[(0,_.jsx)("span",{children:"i"})," ",N.errors.mobile," "]})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("label",{htmlFor:"birthday",children:"Birthday"}),(0,_.jsx)("input",{type:"date",name:"birthday",onChange:N.handleChange,value:N.values.birthday}),N.touched.birthday&&N.errors.birthday&&(0,_.jsxs)("p",{children:[(0,_.jsx)("span",{children:"i"})," ",N.errors.birthday]})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("label",{htmlFor:"gender",children:"Gender :"}),(0,_.jsxs)("select",{onChange:N.handleChange,value:N.values.gender,name:"gender",children:[(0,_.jsx)("option",{value:"",children:"Choose"}),(0,_.jsx)("option",{value:"male",children:"Male"}),(0,_.jsx)("option",{value:"female",children:"Female"})]}),N.touched.gender&&N.errors.gender&&(0,_.jsxs)("p",{children:[(0,_.jsx)("span",{children:"i"})," ",N.errors.gender," "]})]})]}),(0,_.jsx)(k,{children:(0,_.jsx)("input",{onClick:N.handleSubmit,type:"submit",value:"Update Profile",disabled:f})})]})]})]})};var P=f.ZP.div(i||(i=(0,s.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 2rem;\n  width: 100%;\n  max-width: 800px;\n  margin-bottom: 3rem;\n"]))),C=f.ZP.div(a||(a=(0,s.Z)(["\n  border-radius: 0.5rem;\n  box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\n  padding: 5rem;\n  margin: 2rem;\n  width: 90%;\n  @media screen and (max-width: 768px) {\n    margin: 0 5rem;\n  }\n  @media screen and (max-width: 576px) {\n    padding: 2rem;\n  }\n"]))),q=f.ZP.div(t||(t=(0,s.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 2rem;\n  margin-bottom: 2rem;\n  &:hover {\n    cursor: pointer;\n  }\n\n  img {\n    width: 13rem;\n    height: 13rem;\n    border-radius: 50%;\n    object-fit: cover;\n  }\n"]))),F=f.ZP.form(l||(l=(0,s.Z)(["\n  width: 100%;\n  height: 100%;\n"]))),S=f.ZP.div(o||(o=(0,s.Z)(['\n  div {\n    margin: 1rem 0;\n    & label {\n      font-size: 1.3rem;\n      color: var(--text-secondary);\n    }\n\n    & input {\n      width: 100%;\n      height: 3.5rem;\n      padding: 0 1rem;\n      border: none;\n      outline: none;\n      &:focus {\n        box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px,\n          rgba(0, 0, 0, 0.3) 0px 1px 3px -1px;\n      }\n      &::placeholder {\n        padding-left: 0.5rem;\n        font-size: 1.3rem;\n      }\n    }\n    & input[type="file"] {\n      padding: 0.5rem 0;\n    }\n\n    p {\n      font-size: 1.1rem;\n      span {\n        font-style: italic;\n        color: tomato;\n        margin: 1.3rem 0.4rem 0 0;\n        font-weight: 700;\n        font-size: 1.3rem;\n      }\n    }\n  }\n']))),k=f.ZP.div(d||(d=(0,s.Z)(["\n  & input {\n    font-size: 1.3rem;\n    border: none;\n    background-color: var(--bg-primary);\n    padding: 1rem 2rem;\n    border-radius: 5px;\n    margin-bottom: 1rem;\n    cursor: pointer;\n    transition: all 0.5s;\n    &:hover {\n      color: #fff;\n      background-color: #ff6347f6;\n    }\n  }\n"])))},2958:function(e,n,r){var i=r(5861),a=r(7757),t=r.n(a),l=r(4569),o=r.n(l),d=function(){var e=(0,i.Z)(t().mark((function e(n,r){var i,a,l,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=[],a=0;a<n.length;a++)i.push(n[a]);return l=i.map((function(e){return new Promise((function(n,r){try{var i=new FileReader;i.readAsDataURL(e),i.onload=function(r){var i=e.name.split(".")[0];n({base64:r.target.result,options:{public_id:i,tags:[i]}})}}catch(a){console.error(a),r(null===a||void 0===a?void 0:a.message)}}))})),e.next=5,Promise.all(l);case 5:return d=e.sent,e.abrupt("return",new Promise((function(e,n){o().post("/api/v1/media/uploadImages",{images:d,folder:r}).then((function(n){e(n.data.urls)})).catch((function(e){n(e)}))})));case 7:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}();n.Z=d},7326:function(e,n,r){function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(n,{Z:function(){return i}})},9611:function(e,n,r){function i(e,n){return i=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},i(e,n)}r.d(n,{Z:function(){return i}})}}]);
//# sourceMappingURL=552.c2951aad.chunk.js.map