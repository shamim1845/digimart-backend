"use strict";(self.webpackChunkdigimart_frontend=self.webpackChunkdigimart_frontend||[]).push([[582],{6654:function(e,n,r){r.r(n);var i,a,t,l,o,d,s,u=r(168),c=r(885),m=r(2791),h=r(4569),p=r.n(h),f=r(6960),v=r(4603),x=r(5705),b=r(1089),g=r(2958),j=r(6871),y=r(184);n.default=function(){var e,n=(0,m.useState)(null),r=(0,c.Z)(n,2),i=r[0],a=r[1],t=(0,m.useState)(!1),l=(0,c.Z)(t,2),o=l[0],d=l[1],s=(0,m.useState)(null),u=(0,c.Z)(s,2),h=u[0],v=u[1],S=(0,m.useState)(!1),k=(0,c.Z)(S,2),z=k[0],E=k[1],R=(0,j.s0)();(0,m.useEffect)((function(){p().get("/api/v1/me").then((function(e){a(e.data.user)}))}),[]);var A=(0,x.TA)({initialValues:{name:(null===i||void 0===i?void 0:i.name)||"",email:(null===i||void 0===i?void 0:i.email)||"",mobile:(null===i||void 0===i?void 0:i.mobile)||"",birthday:(null===i||void 0===i?void 0:i.birthday)||"",gender:(null===i||void 0===i?void 0:i.gender)||""},enableReinitialize:!0,validationSchema:b.Ry({name:b.Z_().min(3,"Name must have at least 3 characters.").required("Name is required."),email:b.Z_().email("Email must be a valid email.").required("Email is required."),mobile:b.Z_().max(11).required("Phone Number is required."),birthday:b.Z_().required("birthday  is required."),gender:b.Z_().required("Gender  is required.")}),onSubmit:function(e,n){n.resetForm;E(!0);var r=e.name,a=e.email,t=e.mobile,l=e.birthday,o=e.gender;function d(){var e,n,d,s,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],c={public_id:null!==(e=u[0])&&void 0!==e&&e.public_id?null===(n=u[0])||void 0===n?void 0:n.public_id:i.avatar.public_id,url:null!==(d=u[0])&&void 0!==d&&d.secure_url?null===(s=u[0])||void 0===s?void 0:s.secure_url:i.avatar.url};p().put("/api/v1/profile/update",{name:r,email:a,avatar:c,mobile:t,birthday:l,gender:o}).then((function(e){200===e.status&&e.data.success?((0,f.Am)("Profile update Sucessfull"),setTimeout((function(){R("/account/myprofile")}),3e3)):(0,f.Am)(e.data.message)})).catch((function(e){console.log(e.message)}))}console.log(e),h?(0,g.Z)(h).then((function(e){d(e)})):d()}});return(0,y.jsxs)(Z,{children:[(0,y.jsx)(P,{children:(0,y.jsx)("h2",{children:"Update Profile"})}),(0,y.jsxs)(w,{children:[(0,y.jsx)(_,{onClick:function(){return d(!0)},children:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("img",{src:null===i||void 0===i||null===(e=i.avatar)||void 0===e?void 0:e.url,alt:"profile_picture"}),o&&(0,y.jsxs)("div",{children:[(0,y.jsx)("input",{type:"file",name:"profilePic",onChange:function(e){return v(e.target.files[0])}}),A.touched.profilePic&&A.errors.profilePic&&(0,y.jsxs)("p",{children:[(0,y.jsx)("span",{children:"i"})," ",A.errors.profilePic," "]})]})]})}),(0,y.jsxs)(C,{onSubmit:A.handleSubmit,children:[(0,y.jsxs)(q,{children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{htmlFor:"name",children:" Full Name"}),(0,y.jsx)("input",{type:"name",name:"name",onChange:A.handleChange,value:A.values.name}),A.touched.name&&A.errors.name&&(0,y.jsxs)("p",{children:[(0,y.jsx)("span",{children:"i"})," ",A.errors.name," "]})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{htmlFor:"email",children:"Email"}),(0,y.jsx)("input",{type:"email",name:"email",onChange:A.handleChange,value:A.values.email}),A.touched.email&&A.errors.email&&(0,y.jsxs)("p",{children:[(0,y.jsx)("span",{children:"i"})," ",A.errors.email," "]})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{htmlFor:"mobile",children:"Mobile"}),(0,y.jsx)("input",{type:"tel",name:"mobile",onChange:A.handleChange,value:A.values.mobile}),A.touched.mobile&&A.errors.mobile&&(0,y.jsxs)("p",{children:[(0,y.jsx)("span",{children:"i"})," ",A.errors.mobile," "]})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{htmlFor:"birthday",children:"Birthday"}),(0,y.jsx)("input",{type:"date",name:"birthday",onChange:A.handleChange,value:A.values.birthday}),A.touched.birthday&&A.errors.birthday&&(0,y.jsxs)("p",{children:[(0,y.jsx)("span",{children:"i"})," ",A.errors.birthday]})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{htmlFor:"gender",children:"Gender :"}),(0,y.jsxs)("select",{onChange:A.handleChange,value:A.values.gender,name:"gender",children:[(0,y.jsx)("option",{value:"",children:"Choose"}),(0,y.jsx)("option",{value:"male",children:"Male"}),(0,y.jsx)("option",{value:"female",children:"Female"})]}),A.touched.gender&&A.errors.gender&&(0,y.jsxs)("p",{children:[(0,y.jsx)("span",{children:"i"})," ",A.errors.gender," "]})]})]}),(0,y.jsx)(F,{children:(0,y.jsx)("input",{onClick:A.handleSubmit,type:"submit",value:"Update Profile",disabled:z})})]})]})]})};var Z=v.ZP.div(i||(i=(0,u.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 2rem;\n  width: 100%;\n  max-width: 800px;\n  margin-bottom: 3rem;\n"]))),w=v.ZP.div(a||(a=(0,u.Z)(["\n  border-radius: 0.5rem;\n  box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\n  padding: 5rem;\n  margin: 2rem;\n  width: 90%;\n  @media screen and (max-width: 768px) {\n    margin: 0 5rem;\n  }\n  @media screen and (max-width: 450px) {\n    padding: 2rem;\n  }\n"]))),P=v.ZP.div(t||(t=(0,u.Z)(["\n  margin-top: 2rem;\n\n  width: 90%;\n\n  h2 {\n    text-align: left;\n  }\n  @media screen and (max-width: 768px) {\n    h2 {\n      text-align: center;\n    }\n  }\n"]))),_=v.ZP.div(l||(l=(0,u.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 2rem;\n  margin-bottom: 2rem;\n  &:hover {\n    cursor: pointer;\n  }\n  img {\n    width: 15rem;\n    height: 15rem;\n    border-radius: 50%;\n    object-fit: cover;\n  }\n"]))),C=v.ZP.form(o||(o=(0,u.Z)(["\n  width: 100%;\n  height: 100%;\n"]))),q=v.ZP.div(d||(d=(0,u.Z)(["\n  div {\n    margin: 1rem 0;\n    & label {\n      font-size: 1.3rem;\n      color: var(--text-secondary);\n    }\n    & input {\n      width: 100%;\n      height: 3.5rem;\n      padding: 0 1rem;\n      border: none;\n      outline: none;\n      &:focus {\n        box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px,\n          rgba(0, 0, 0, 0.3) 0px 1px 3px -1px;\n      }\n      &::placeholder {\n        padding-left: 0.5rem;\n        font-size: 1.3rem;\n      }\n    }\n    p {\n      font-size: 1.1rem;\n      span {\n        font-style: italic;\n        color: tomato;\n        margin: 1.3rem 0.4rem 0 0;\n        font-weight: 700;\n        font-size: 1.3rem;\n      }\n    }\n  }\n"]))),F=v.ZP.div(s||(s=(0,u.Z)(["\n  & input {\n    font-size: 1.3rem;\n    border: none;\n    background-color: var(--bg-primary);\n    padding: 1rem 2rem;\n    border-radius: 5px;\n    margin-bottom: 1rem;\n    cursor: pointer;\n    transition: all 0.5s;\n    &:hover {\n      color: #fff;\n      background-color: #ff6347f6;\n    }\n  }\n"])))},2958:function(e,n,r){var i=r(5861),a=r(7757),t=r.n(a),l=r(4569),o=r.n(l),d=function(){var e=(0,i.Z)(t().mark((function e(n){var r,i,a,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],i=0;i<n.length;i++)r.push(n[i]);return a=r.map((function(e){return new Promise((function(n,r){var i=new FileReader;i.readAsDataURL(e),i.onload=function(r){var i=e.name.split(".")[0];n({base64:r.target.result,options:{public_id:i,tags:[i]}})}}))})),e.next=5,Promise.all(a);case 5:return l=e.sent,e.abrupt("return",new Promise((function(e,n){o().post("/api/v1/media/uploadImage",{images:l}).then((function(n){e(n.data.urls)})).catch((function(e){n(e)}))})));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();n.Z=d},7326:function(e,n,r){function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(n,{Z:function(){return i}})},9611:function(e,n,r){function i(e,n){return i=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},i(e,n)}r.d(n,{Z:function(){return i}})}}]);
//# sourceMappingURL=582.76109f13.chunk.js.map